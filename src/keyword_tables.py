# keyword_tables.py
# 道·衍 - 關鍵詞表集中管理

"""
關鍵詞表集中管理

設計理念：
- 將所有關鍵詞從驗證邏輯中抽離
- 便於維護和更新
- 當 prompt 改變時只需調整詞表
"""

# NPC 指示詞（代詞 + 角色 + 物種）
NPC_INDICATORS = [
    # 代詞（最重要）
    '牠', '他', '她', '它',

    # NPC 角色
    '靈獸', '敵人', '師兄', '師姐', '長老', '弟子',
    '修士', '道人', '道長', '老者', '門人', '執事',

    # 具體物種/角色
    '霜焰獅', '妖獸', '魔獸', '對手',
    '白衣少女', '侍從', '隨從',

    # ⚠️ 注意：移除了太寬泛的詞彙（如「人」「獸」「獅」）
    # 這些詞可能誤判正常描述
]

# 玩家指示詞
PLAYER_INDICATORS = [
    # 代詞
    '你', '您', '玩家', '自己', '本人', '我',

    # 身體部位/感受（常見於修仙描述）
    '你的', '身體', '傷口', '體內', '心中', '腦海',
    '靈力', '法力', '丹田', '經脈',
]

# 傷害關鍵詞
DAMAGE_KEYWORDS = [
    '受傷', '損傷', '痛苦', '疼痛', '重傷', '致命傷',
    '流血', '傷勢', '傷害', '受損', '負傷',
]

# 移動關鍵詞
MOVE_KEYWORDS = [
    '移動', '前往', '來到', '離開', '到達',
    '走向', '踏入', '進入', '離去', '抵達',
]

# HP 損失關鍵詞（用於一致性檢查）
HP_LOSS_KEYWORDS = DAMAGE_KEYWORDS

# 獲得物品關鍵詞
ITEM_GAIN_KEYWORDS = [
    '獲得', '得到', '撿起', '拾取', '收穫',
    '取得', '獲取', '發現', '找到',
]

# 失去物品關鍵詞
ITEM_LOSS_KEYWORDS = [
    '失去', '消耗', '使用', '丟棄',
    '遺失', '損失',
]

# ============ Regex 模式（用於 auto_fix_state）============
# 這些模式用於從敘述中自動提取狀態更新

# 物品獲得模式
# 匹配：「獲得XXX」「得到XXX」「賜予你XXX」等
# 第一組：動詞，第二組：物品名（2-6 字）
REGEX_ITEM_GAIN = r'(獲得|得到|撿起|拾取|賜予|授予|取得)(?:了)?(?:你)?(?:一[個件把枚塊顆粒張本份])?([^，。！？\s]{2,6})'

# HP 損失模式
# 匹配：「失去了 20 點生命」「損失20點HP」等
# 第一組：數值
REGEX_HP_DAMAGE = r'(?:損失|扣除|減少|失去|扣|減)(?:了)?\s*(\d+)\s*(?:點)?\s*(?:生命|HP|血量|點生命)'

# 移動目的地模式
# 匹配：「來到青雲門」「進入靈獸森林」等
# 第一組：動詞，第二組：地點名（2-10 字）
REGEX_MOVEMENT = r'(來到|抵達|進入|走進|踏入)(?:了)?([^，。！？\s]{2,10})'

# ============ 無效物品過濾（用於 auto_fix_state）============
# 這些詞彙不應被當作物品加入背包
INVALID_ITEM_WORDS = [
    # 抽象概念
    '指導', '感悟', '激勵', '希望', '信心', '力量', '勇氣',
    '智慧', '啟發', '領悟', '體會', '心得', '經驗', '知識',
    '認可', '讚賞', '鼓勵', '支持', '幫助', '建議', '忠告',
    # 情感/狀態
    '好感', '尊重', '信任', '友誼', '感謝', '敬意',
    # 被截斷的詞特徵
    '的靈', '的藥', '的草', '的丹',  # 「珍貴的靈」這類截斷
]

# 無效物品的正則模式
INVALID_ITEM_PATTERNS = [
    r'^一些',      # 數量詞開頭：「一些珍貴」
    r'^更多',      # 「更多的指導」
    r'的$',        # 以「的」結尾（被截斷）
]
